<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Campus Virtual - Seo</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="campus.css">
</head>
<body>

<nav class="navbar">
  <span class="navbar-text">Bienvenido al Campus Educaci贸nIT</span>
  <div class="dropdown">
    <a class="d-flex align-items-center text-white text-decoration-none dropdown-toggle" href="#" id="dropdownUser" data-bs-toggle="dropdown" aria-expanded="false">
      <i class="bi bi-person-circle user-icon"></i>
      <span class="ms-2">Usuario</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdownUser">
      <li><a class="dropdown-item" href="../../mis_cursos.html"><i class="bi bi-journal-text me-2"></i>Mis cursos</a></li>
      <li><a class="dropdown-item" href="../../index.html"><i class="bi bi-box-arrow-right me-2"></i>Salir</a></li>
    </ul>
  </div>
</nav>

<div class="campus-container">
  <aside class="sidebar">
    <h4>Seo</h4>
    <ul class="list-group" id="lista-modulos"></ul>   
  </aside>

  <main class="content d-flex flex-column justify-content-center align-items-center text-center">
    <div id="pantalla-inicial">
      <h2>Bienvenid@ al Curso de Seo</h2>
      <p class="mt-3">
        Este curso est谩 dise帽ado para que desarrolles las habilidades necesarias para gestionar, construir y moderar comunidades en torno a una marca en el entorno digital.
        Contamos con <strong>4 m贸dulos</strong> que incluyen:
      </p>
      <ul class="text-start mx-auto" style="max-width:500px;">
        <li>Fundamentos del SEO</li>
        <li>Investigaci贸n de Palabras Clave</li>
        <li>SEO On-Page y Contenido</li>
        <li>Anal铆tica Web y Monitoreo</li>
      </ul>
      <p class="mt-3">
        Ante cualquier duda, pod茅s escribir al correo del profesor <strong>Andres Torres</strong>: 
        <a href="mailto:andres.torres@educacionit.com">andres.torres@educacionit.com</a>
      </p>
      <button id="btn-comenzar" class="btn btn-primary mt-3">Comenzar</button>
    </div>

    <div id="contenido-curso" style="display:none; width:100%;">
      <h2 id="titulo-leccion"></h2>
      <div id="contenido-leccion"></div>
      <div class="d-flex justify-content-end">
        <button id="btn-siguiente" class="btn btn-primary mt-3" onclick="siguienteTema()" disabled>Siguiente</button>
      </div>
    </div>

    <button id="btn-evaluacion" class="btn btn-warning mt-3" onclick="window.location.href='prueba.html'" style="display:none;">
      Realizar Evaluaci贸n Final
    </button>
  </main>
</div>

<script>
const curso = [
    {
        titulo: "M贸dulo 1: Introducci贸n",
        temas: [
        {
            titulo: "Fundamentos del SEO",
            contenido: `
            <div class="tema-contenido">
            <div class="video-container">
                <iframe src="https://www.youtube.com/embed/bdUS3wjTzdE?si=4ut7A4nGxRNZJZ6F" title="seo" allowfullscreen></iframe>
            </div>
            <div class="descripcion-container text-center" style="max-width: 800px; margin: 0 auto;">
                <h3>Fundamentos del SEO</h3>
                <p>
                M贸dulo 1: Fundamentos del SEO
                Descripci贸n:
                Conceptos Clave	驴Qu茅 es el SEO (Search Engine Optimization) y por qu茅 es vital? C贸mo funcionan los motores de b煤squeda (rastreo, indexaci贸n y clasificaci贸n). Diferencia entre SEO y SEM.
                Palabras Clave Semilla	Introducci贸n a la identificaci贸n de t茅rminos que usa tu audiencia. Intenci贸n de
                </p>
                <p>
                Ante cualquier duda, puedes comunicarte con el profesor 
                <a href="mailto:andres.torres@educacionit.com" style="text-decoration: none; color: #0d6efd; display: inline-flex; align-items: center; gap: 5px;">
                    <i class="bi bi-envelope-fill"></i> andres.torres@educacionit.com
                </a>
                </p>
            </div>
            </div>`
        },
        ]
    },
  {
    titulo: "M贸dulo 2: Investigaci贸n de Palabras Clave",
    temas: [
      {
        titulo: "Investigaci贸n de Palabras Clave",
        contenido: `
        <div class="tema-contenido">
          <div class="video-container">
            <iframe src="https://www.youtube.com/embed/d9J_cG96xWY?si=efR_UAX8ZsFSyhKP"  title="seo2" allowfullscreen></iframe>
          </div>
          <div class="descripcion-container">
            <h3>驴Qu茅 aprender谩s?</h3>
            <p>Herramientas de Keyword Research	Uso de herramientas gratuitas y de pago (ej. Google Keyword Planner, sugerencias de Google). An谩lisis de la competencia.
            Tipos de Palabras Clave	Palabras clave de cola corta (mayor volumen, m谩s competencia) vs. cola larga (menor volumen, m谩s espec铆ficas, m谩s conversi贸n).</p>
          </div>
        </div>`
      },
      {
        titulo: "SEO On-Page y Contenido",
        contenido: `
        <div class="tema-contenido">
          <div class="video-container">
            <iframe src="https://www.youtube.com/embed/yhslBP_pxT8?si=NF1jNXew7gR7OA6O"  title="Video Tipos de Datos" allowfullscreen></iframe>
          </div>
          <div class="descripcion-container">
            <h3>驴Qu茅 aprender谩s?</h3>
            <p>Optimizaci贸n On-Page: Optimizaci贸n de elementos dentro de la propia p谩gina: T铆tulos (Title Tag), Meta Descripciones, encabezados (H1-H6), URL.
Arquitectura del Contenido	C贸mo estructurar el texto para legibilidad y SEO. Uso natural de palabras clave y sin贸nimos (SEO sem谩ntico).</p>
          </div>
        </div>`
      }
    ]
  },
  {
    titulo: "M贸dulo 3: SEO Off-Page y Link Building",
    temas: [
      {
        titulo: "SEO Off-Page y Link Buildings",
        contenido: `
        <div class="tema-contenido">
          <div class="video-container">
            <iframe src="https://www.youtube.com/embed/ZGHp3VnZ2U4?si=v46yV5xE0PXycc9y" title="Video Condicionales" allowfullscreen></iframe>
          </div>
          <div class="descripcion-container">
            <h3>驴Qu茅 aprender谩s?</h3>
            <p> SEO Off-Page: Acciones realizadas fuera de tu sitio web para mejorar el posicionamiento. Se centra principalmente en la autoridad y la confianza.
            Link Building (Construcci贸n de Enlaces)	Qu茅 son los backlinks y su importancia. Conceptos de Autoridad de Dominio (Domain Authority) y la calidad vs. cantidad de enlaces.</p>
          </div>
        </div>`
      }
    ]
  },
  {
    titulo: "M贸dulo 4:Anal铆tica Web y Monitoreo",
    temas: [
      {
        titulo: "Anal铆tica Web y Monitoreo",
        contenido: `
        <div class="tema-contenido">
          <div class="video-container">
            <iframe src="https://www.youtube.com/embed/pTRlaM9ntOg?si=TmzycTcYrm_RcSAr" title="Video Diccionarios" allowfullscreen></iframe>
          </div>
          <div class="descripcion-container">
            <h3>驴Qu茅 aprender谩s?</h3>
            <p>Herramientas de Anal铆tica: Uso de Google Analytics y Google Search Console para medir el rendimiento SEO.
            M茅tricas Clave	Monitoreo de tr谩fico org谩nico, tasa de clics (CTR), posici贸n promedio en SERP y tasa de rebote.</p>
          </div>
        </div>`
      }
    ]
  }
];




let moduloActual = 0;
let temaActual = 0;

const listaModulos = document.getElementById('lista-modulos');
const tituloLeccion = document.getElementById('titulo-leccion');
const contenidoLeccion = document.getElementById('contenido-leccion');
const btnSiguiente = document.getElementById('btn-siguiente');
const btnComenzar = document.getElementById('btn-comenzar');
const btnEvaluacion = document.getElementById('btn-evaluacion'); // bot贸n test

// === GUARDAR Y CARGAR PROGRESO LOCAL ===
function guardarProgreso() {
  const progreso = {
    moduloActual,
    temaActual,
    curso: curso.map(mod => ({
      habilitado: mod.habilitado,
      temas: mod.temas.map(t => ({
        hecho: t.hecho,
        habilitado: t.habilitado
      }))
    })),
    cursoCompletado: localStorage.getItem("cursoCompletado") === "true"
  };
  localStorage.setItem("progresoSEO", JSON.stringify(progreso));
}

function cargarProgresoLocal() {
  const data = localStorage.getItem("progresoSEO");
  if (!data) return false;
  const progreso = JSON.parse(data);

  progreso.curso.forEach((mod, i) => {
    curso[i].habilitado = mod.habilitado;
    mod.temas.forEach((t, j) => {
      curso[i].temas[j].hecho = t.hecho;
      curso[i].temas[j].habilitado = t.habilitado;
    });
  });

  moduloActual = progreso.moduloActual;
  temaActual = progreso.temaActual;

  return true;
}

// Inicializar estado
curso.forEach(m => {
  m.habilitado = false;
  m.temas.forEach(t => {
    t.hecho = false;
    t.habilitado = false;
  });
});

// Cargar m贸dulos en sidebar
function cargarModulos() {
  listaModulos.innerHTML = "";
  curso.forEach((modulo, i) => {
    const li = document.createElement('li');
    li.classList.add('list-group-item');
    if (!modulo.habilitado) li.classList.add('deshabilitado');

    const todosHechos = modulo.temas.every(t => t.hecho);
    const iconoCheck = todosHechos ? `<i class="bi bi-check2 modulo-completo"></i>` : "";

    li.innerHTML = `
      <a class="modulo-link" data-bs-toggle="collapse" href="#modulo${i}" role="button">
        ${modulo.titulo} ${iconoCheck} <i class="bi bi-chevron-down"></i>
      </a>
      <ul class="list-group collapse" id="modulo${i}"></ul>
    `;
    listaModulos.appendChild(li);

    const ulTemas = li.querySelector('ul');
    modulo.temas.forEach((tema, j) => {
      const temaLi = document.createElement('li');
      temaLi.classList.add('list-group-item', 'tema-item');
      temaLi.textContent = tema.titulo;

      if (tema.habilitado) {
        temaLi.style.cursor = 'pointer';
        temaLi.style.opacity = '1';
        temaLi.onclick = () => mostrarTema(i, j);
      } else {
        temaLi.style.cursor = 'not-allowed';
        temaLi.style.opacity = '0.5';
      }

      ulTemas.appendChild(temaLi);
    });
  });
}

// Mostrar tema
function mostrarTema(m, t) {
  if (!curso[m].habilitado || !curso[m].temas[t].habilitado) {
    alert("Debes completar los temas anteriores primero.");
    return;
  }

  moduloActual = m;
  temaActual = t;
  const tema = curso[m].temas[t];
  tituloLeccion.textContent = tema.titulo;
  contenidoLeccion.innerHTML = tema.contenido;

  let botonesHTML = `<button class="btn btn-success" id="btn-hecho">Marcar como hecho</button>`;
  if (m === 1 && t === 1) {
    botonesHTML += `<button class="btn btn-primary" id="btn-pdf" onclick="window.open('Material/Actividad_seo.pdf', '_blank')">Ver PDF de pr谩ctica</button>`;
  }

  const contenedorBotones = document.createElement('div');
  contenedorBotones.id = 'botones-leccion';
  contenedorBotones.className = 'd-flex gap-2 mt-3 justify-content-end';
  contenedorBotones.innerHTML = botonesHTML;
  contenidoLeccion.appendChild(contenedorBotones);

  btnSiguiente.disabled = true;
  btnSiguiente.style.display = (m === curso.length - 1 && t === curso[m].temas.length - 1)
    ? 'none' : 'inline-block';

  document.getElementById('btn-hecho').onclick = () => marcarComoHecho(m, t);

  // Mostrar bot贸n evaluaci贸n solo si es el 煤ltimo tema del 煤ltimo m贸dulo y no completado
  if (m === curso.length - 1 && t === curso[m].temas.length - 1 && localStorage.getItem("cursoCompletado") !== "true") {
    btnEvaluacion.style.display = 'block';
  } else {
    btnEvaluacion.style.display = 'none';
  }

  guardarProgreso();
}

// Marcar tema como hecho
function marcarComoHecho(m, t) {
  curso[m].temas[t].hecho = true;
  btnSiguiente.disabled = false;

  if (t + 1 < curso[m].temas.length) {
    curso[m].temas[t + 1].habilitado = true;
  } else if (m + 1 < curso.length) {
    curso[m + 1].habilitado = true;
    curso[m + 1].temas[0].habilitado = true;
  }

  guardarProgreso();
  cargarModulos();
}

// Aprobar curso despu茅s del test
function aprobarCurso() {
  localStorage.setItem("cursoCompletado", "true");
  guardarProgreso();
  mostrarCursoCompletadoGlobal();
}

// Mostrar curso completado
function mostrarCursoCompletadoGlobal() {
  btnEvaluacion.style.display = 'none';

  // Marcar todos los m贸dulos y temas como completados
  curso.forEach(mod => {
    mod.habilitado = true;
    mod.temas.forEach(t => t.hecho = true);
  });

  // Actualizar sidebar con check
  cargarModulos();

  // Mostrar mensaje central
  contenidoLeccion.innerHTML = "";
  const mensaje = document.createElement('div');
  mensaje.className = 'alert alert-success mt-4 text-center fw-bold';
  mensaje.textContent = ' 隆Felicidades! Has completado el curso exitosamente.';
  contenidoLeccion.appendChild(mensaje);
}

// Bot贸n siguiente
function siguienteTema() {
  if (temaActual < curso[moduloActual].temas.length - 1) {
    mostrarTema(moduloActual, temaActual + 1);
  } else if (moduloActual < curso.length - 1) {
    mostrarTema(moduloActual + 1, 0);
  } else {
    btnSiguiente.disabled = true;
  }
  guardarProgreso();
}

// Bot贸n comenzar
btnComenzar.onclick = () => {
  document.getElementById('pantalla-inicial').style.display = 'none';
  document.getElementById('contenido-curso').style.display = 'block';
  curso[0].habilitado = true;
  curso[0].temas[0].habilitado = true;
  cargarModulos();
  mostrarTema(0, 0);
};

// === Al cargar la p谩gina ===
document.addEventListener("DOMContentLoaded", () => {
  // Cargar progreso guardado
  cargarProgresoLocal();

  // Si el curso ya fue completado, mostrar mensaje autom谩ticamente
  if (localStorage.getItem("cursoCompletado") === "true") {
    mostrarCursoCompletadoGlobal();
  } else {
    // Si hay progreso previo, cargar 煤ltimo m贸dulo y tema
    const tieneProgreso = cargarProgresoLocal();
    if (tieneProgreso) {
      document.getElementById('pantalla-inicial').style.display = 'none';
      document.getElementById('contenido-curso').style.display = 'block';
      cargarModulos();
      mostrarTema(moduloActual, temaActual);
    } else {
      // Si no hay progreso, cargar m贸dulos iniciales
      cargarModulos();
    }
  }
});
</script>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>