<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Evaluación Final</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <main class="quiz-container container py-4">
    <h2 class="text-center mb-3">Evaluación Final</h2>
    <p class="text-center">Tienes 5 minutos para completar el test. Para aprobar con nota máxima debes obtener al menos 7 puntos.</p>
    <div class="text-center mb-3">
      <span>Tiempo restante: </span><span id="timer">05:00</span>
    </div>

    <form id="quizForm">
      <!-- Preguntas -->
      <div class="question">
        <p><strong>1.¿Cuál de las 'V's del Big Data se refiere específicamente a la escala de los datos que excede la capacidad de las herramientas de procesamiento y almacenamiento tradicionales?</strong></p>
        <label><input type="radio" name="q1" value="Par"> a) Volumen </label><br>
        <label><input type="radio" name="q1" value="Impar"> b) Velocidad </label><br>
        <label><input type="radio" name="q1" value="7"> c) Variedad </label>
      </div>

      <div class="question">
        <p><strong>2. Si un proyecto de Big Data incluye el análisis de texto de redes sociales, videos de vigilancia y registros de transacciones de bases de datos, ¿a cuál 'V' se hace referencia? </strong></p>
        <label><input type="radio" name="q2" value="correcta"> a) Variedad </label><br>
        <label><input type="radio" name="q2" value="opcion2"> b)Valor </label><br>
        <label><input type="radio" name="q2" value="opcion3"> c) Veracidad </label>
      </div>

      <div class="question">
        <p><strong>3. ¿Cuál es la principal ventaja de utilizar Apache Spark sobre el MapReduce tradicional de Hadoop, que lo hace ideal para el Machine Learning y el análisis interactivo? </strong></p>
        <label><input type="radio" name="q3" value="Tupla"> a) Spark utiliza bases de datos NoSQL. </label><br>
        <label><input type="radio" name="q3" value="Lista"> b) Procesa los datos en memoria (In-memory computing).</label><br>
        <label><input type="radio" name="q3" value="Conjunto"> c) Utiliza únicamente datos estructurados. </label><br>
      </div>

      <div class="question">
        <p><strong>4. ¿Qué modelo de almacenamiento se caracteriza por guardar grandes volúmenes de datos en su formato original (raw data) sin imponer una estructura o esquema predefinido (Schema-on-Read)?</strong></p>
        <label><input type="radio" name="q4" value="correcta"> a) Data Lake </label><br>
        <label><input type="radio" name="q4" value="opcion2"> b) Data Warehouse </label><br>
        <label><input type="radio" name="q4" value="opcion3"> c) Data Mart </label>
      </div>

      <div class="question">
        <p><strong>5. Una empresa utiliza Big Data Analytics para crear un sistema que sugiere el precio óptimo de un producto en tiempo real para maximizar las ganancias. ¿Qué tipo de análisis está aplicando? </strong></p>
        <label><input type="radio" name="q5" value="correcta"> a) Análisis Prescriptivo </label><br>
        <label><input type="radio" name="q5" value="opcion2"> b) Análisis Descriptivo </label><br>
        <label><input type="radio" name="q5" value="opcion3"> c) Análisis Predictivo </label>
      </div>

      <div class="question">
        <p><strong>6. ¿Cuál es el rol dentro del ecosistema de datos que es el principal responsable de construir, optimizar y mantener los 'pipelines' de datos para asegurar su flujo y disponibilidad? </strong></p>
        <label><input type="radio" name="q6" value="correcta"> a) Data Engineer (Ingeniero de Datos). </label><br>
        <label><input type="radio" name="q6" value="opcion2"> b) Data Analyst (Analista de Datos). </label><br>
        <label><input type="radio" name="q6" value="opcion3"> c) Data Scientist (Científico de Datos). </label>
      </div>

      <div class="question">
        <p><strong>7. La Arquitectura Lambda está diseñada para manejar el procesamiento de datos a través de dos capas separadas, ¿cuáles son estas dos capas principales? </strong></p>
        <label><input type="radio" name="q7" value="correcta"> a) Capa por Lotes (Batch) y Capa de Velocidad (Speed) </label><br>
        <label><input type="radio" name="q7" value="opcion2"> b) Capa de Entrada y Capa de Salida </label><br>
        <label><input type="radio" name="q7" value="opcion3"> c) Capa de Hardware y Capa de Software </label>
      </div>

      <div class="question">
        <p><strong>8. En el contexto del procesamiento de datos en tiempo real (streaming), ¿cuál de las siguientes tecnologías actúa como un broker de mensajes distribuido para gestionar la ingesta y el transporte de flujos de datos de alta velocidad? </strong></p>
        <label><input type="radio" name="q8" value="correcta"> a) Apache Kafka </label><br>
        <label><input type="radio" name="q8" value="opcion2"> b) HDFS (Hadoop Distributed File System) </label><br>
        <label><input type="radio" name="q8" value="opcion3"> c) SQL Server </label>
      </div>

      <div class="question">
        <p><strong>9. ¿Qué métrica de UX (Módulo 5) es un indicador de la lealtad del cliente y su disposición a recomendar el producto a otros?</strong></p>
        <label><input type="radio" name="q9" value="correcta"> a) Net Promoter Score (NPS)</label><br>
        <label><input type="radio" name="q9" value="opcion2"> b) Customer Effort Score (CES)</label><br>
        <label><input type="radio" name="q9" value="opcion3"> c) Tasa de Éxito de Tarea (Task Success Rate) </label> 
      </div>

      <div class="question">
        <p><strong>10. ¿Cuál es la preocupación ética central relacionada con Big Data que las regulaciones como el GDPR (Reglamento General de Protección de Datos) buscan mitigar?</strong></p>
        <label><input type="radio" name="q10" value="correcta"> a) El uso inadecuado de datos personales y la violación de la privacidad del usuario.</label><br>
        <label><input type="radio" name="q10" value="opcion2"> b) El riesgo de que los servidores se caigan por sobrecarga.</label><br>
        <label><input type="radio" name="q10" value="opcion3"> c) El alto costo de las licencias de software de Big Data. </label>
      </div>

      <button type="submit" class="btn btn-primary mt-3">Enviar</button>
    </form>

   <div id="result" class="mt-3"></div>

    <div class="text-center mt-3">
      <button id="retryBtn" class="btn btn-warning" style="display:none;">Volver a intentar</button>
      <button id="certBtn" class="btn btn-success" style="display:none;">Obtener mi certificado</button>
    </div>
  </main>

<script>
const totalPreguntas = 10;
const minAprobado = 7;
let tiempoRestante = 300; // 5 minutos
let temporizador;
const timerSpan = document.getElementById('timer');
const quizForm = document.getElementById('quizForm');
const result = document.getElementById('result');
const retryBtn = document.getElementById('retryBtn');
const certBtn = document.getElementById('certBtn');

function iniciarTemporizador() {
  clearInterval(temporizador);
  tiempoRestante = 300;
  temporizador = setInterval(() => {
    let minutos = Math.floor(tiempoRestante / 60);
    let segundos = tiempoRestante % 60;
    timerSpan.textContent = `${minutos.toString().padStart(2,'0')}:${segundos.toString().padStart(2,'0')}`;
    tiempoRestante--;
    if(tiempoRestante < 0){
      clearInterval(temporizador);
      evaluarTest(true);
    }
  }, 1000);
}

function resetearTest() {
  quizForm.reset();
  result.innerHTML = '';
  retryBtn.style.display = 'none';
  certBtn.style.display = 'none';
  iniciarTemporizador();
}

quizForm.addEventListener('submit', function(e){
  e.preventDefault();
  evaluarTest(false);
});

retryBtn.addEventListener('click', () => {
  resetearTest();
});

certBtn.addEventListener('click', () => {
  window.location.href = 'certificado.html';
});

function evaluarTest(tiempoAcabado) {
  const respuestasCorrectas = {
    q1:'Impar', q2:'correcta', q3:'Lista', q4:'correcta', q5:'correcta',
    q6:'correcta', q7:'correcta', q8:'correcta', q9:'correcta', q10:'correcta'
  };

  let puntaje = 0;

  for(let q in respuestasCorrectas){
    const r = document.querySelector(`input[name="${q}"]:checked`);
    if(r && r.value === respuestasCorrectas[q]){
      puntaje++;
    }
  }

  if(puntaje >= minAprobado){
    result.innerHTML = `
      <p>¡Felicidades! Puntaje: ${puntaje}/${totalPreguntas}.</p>
      <p>Ahora puedes obtener tu certificado y tendrás la oportunidad de subir un proyecto guiado en PDF para mejorar tu perfil profesional en la bolsa de empleo de EducaciónIT.</p>
    `;
    // ✅ Guardar estado de curso completado en localStorage
    localStorage.setItem("cursoCompletado", "true");

    certBtn.style.display = 'inline-block';
    retryBtn.style.display = 'none';
    clearInterval(temporizador);
  } else {
    if(tiempoAcabado){
      result.innerHTML = `<p>Se acabó el tiempo. Obtuviste ${puntaje}/${totalPreguntas}. Debes volver a intentar el test.</p>`;
    } else {
      result.innerHTML = `<p>Obtuviste ${puntaje}/${totalPreguntas}. Debes repetir el test.</p>`;
    }
    retryBtn.style.display = 'inline-block';
    certBtn.style.display = 'none';
    clearInterval(temporizador);
  }
}

// Iniciar la primera vez
iniciarTemporizador();
</script>


  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>