<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Campus Virtual - Publicidad en Redes Sociales</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="campus.css">
</head>
<body>

<nav class="navbar">
  <span class="navbar-text">Bienvenido al Campus Educaci贸nIT</span>
  <div class="dropdown">
    <a class="d-flex align-items-center text-white text-decoration-none dropdown-toggle" href="#" id="dropdownUser" data-bs-toggle="dropdown" aria-expanded="false">
      <i class="bi bi-person-circle user-icon"></i>
      <span class="ms-2">Usuario</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdownUser">
      <li><a class="dropdown-item" href="../../mis_cursos.html"><i class="bi bi-journal-text me-2"></i>Mis cursos</a></li>
      <li><a class="dropdown-item" href="../../index.html"><i class="bi bi-box-arrow-right me-2"></i>Salir</a></li>
    </ul>
  </div>
</nav>

<div class="campus-container">
  <aside class="sidebar">
    <h4>Publicidad en Redes Sociales</h4>
    <ul class="list-group" id="lista-modulos"></ul>   
  </aside>

  <main class="content d-flex flex-column justify-content-center align-items-center text-center">
    <div id="pantalla-inicial">
      <h2>Bienvenid@ al Curso de Publicidad en Redes Sociales</h2>
      <p class="mt-3">
        Este curso est谩 dise帽ado para que desarrolles las habilidades necesarias para gestionar, construir y moderar comunidades en torno a una marca en el entorno digital.
        Contamos con <strong>4 m贸dulos</strong> que incluyen:
      </p>
      <ul class="text-start mx-auto" style="max-width:500px;">
        <li>Publicidad Efectiva en Redes Sociales</li>
        <li>Segmentaci贸n y Creaci贸n de Audiencias</li>
        <li>Dise帽o y Copywriting para Anuncios Efectivos</li>
        <li>Estrategias Avanzadas y Escalabilidad</li>
      </ul>
      <p class="mt-3">
        Ante cualquier duda, pod茅s escribir al correo del profesora <strong>Laura Martinez</strong>: 
        <a href="mailto:Laura.martinez@educacionit.com">Laura.martinez@educacionit.com</a>
      </p>
      <button id="btn-comenzar" class="btn btn-primary mt-3">Comenzar</button>
    </div>

    <div id="contenido-curso" style="display:none; width:100%;">
      <h2 id="titulo-leccion"></h2>
      <div id="contenido-leccion"></div>
      <div class="d-flex justify-content-end">
        <button id="btn-siguiente" class="btn btn-primary mt-3" onclick="siguienteTema()" disabled>Siguiente</button>
      </div>
    </div>

    <button id="btn-evaluacion" class="btn btn-warning mt-3" onclick="window.location.href='prueba.html'" style="display:none;">
      Realizar Evaluaci贸n Final
    </button>
  </main>
</div>

<script>
const curso = [
    {
        titulo: "M贸dulo 1: Introducci贸n",
        temas: [
        {
            titulo: "Publicidad Efectiva en Redes Sociale",
            contenido: `
            <div class="tema-contenido">
            <div class="video-container">
                <iframe src="https://www.youtube.com/embed/Iky6l5Da9Vo?si=MG__vVlNZy7n_u_r" title="redes1" allowfullscreen></iframe>
            </div>
            <div class="descripcion-container text-center" style="max-width: 800px; margin: 0 auto;">
                <h3>Publicidad Efectiva en Redes Sociale</h3>
                <p>
                M贸dulo 1: Fundamentos de la Publicidad en Redes Sociales
                Descripci贸n:
                驴Qu茅 son los Social Ads?	Definici贸n, evoluci贸n y el ecosistema de la publicidad en plataformas como Facebook, Instagram, YouTube, TikTok, etc.
                1.2 La importancia de la segmentaci贸n	Por qu茅 es vital para el 茅xito. Conceptos b谩sicos de p煤blico objetivo, buyer persona y datos demogr谩ficos.
                </p>
                <p>
                Ante cualquier duda, puedes comunicarte con el profesor 
                <a href="mailto:Laura.martinez@educacionit.com" style="text-decoration: none; color: #0d6efd; display: inline-flex; align-items: center; gap: 5px;">
                    <i class="bi bi-envelope-fill"></i> Laura.martinez@educacionit.com
                </a>
                </p>
            </div>
            </div>`
        },
        ]
    },
  {
    titulo: "M贸dulo 2: Segmentaci贸n y Creaci贸n de Audiencias",
    temas: [
      {
        titulo: "Segmentaci贸n y Creaci贸n de Audiencias",
        contenido: `
        <div class="tema-contenido">
          <div class="video-container">
            <iframe src="https://www.youtube.com/embed/0bJfEandYcI?si=MOGpceu8oJcC0Ac7"  title="redes2" allowfullscreen></iframe>
          </div>
          <div class="descripcion-container">
            <h3>驴Qu茅 aprender谩s?</h3>
            <p>2.1 Tipos de Audiencias	Audiencias Guardadas/Intereses: Segmentaci贸n por intereses, comportamientos y datos demogr谩ficos detallados.
            2.2 Audiencias Personalizadas (Retargeting)	Uso de datos propios: Listas de clientes, visitantes del sitio web (p铆xeles), interacciones en redes sociales (engagement).</p>
          </div>
        </div>`
      },
      {
        titulo: "Dise帽o y Copywriting para Anuncios Efectivos",
        contenido: `
        <div class="tema-contenido">
          <div class="video-container">
            <iframe src="https://www.youtube.com/embed/FWa01VKDcvM?si=AvBkD-vmwaRvT9i5" title="redes3" allowfullscreen></iframe>
          </div>
          <div class="descripcion-container">
            <h3>驴Qu茅 aprender谩s?</h3>
            <p>La Creatividad del Anuncio	Formatos de anuncio (imagen, carrusel, video, stories, reels). Principios del dise帽o para redes sociales.
            3.2 El Copywriting Publicitario	Estructura del texto del anuncio: Gancho (Headline), Cuerpo del texto (Dolor/Soluci贸n/Beneficios) y Llamada a la Acci贸n (CTA).</p>
          </div>
        </div>`
      }
    ]
  },
  {
    titulo: "M贸dulo 3: Medici贸n, Optimizaci贸n y KPIs",
    temas: [
      {
        titulo: "Medici贸n, Optimizaci贸n y KPIs",
        contenido: `
        <div class="tema-contenido">
          <div class="video-container">
            <iframe src="https://www.youtube.com/embed/MYteHgKWhTE?si=Tn6IBUvInl4ObIyh" title="redes4" allowfullscreen></iframe>
          </div>
          <div class="descripcion-container">
            <h3>驴Qu茅 aprender谩s?</h3>
            <p> M茅tricas Clave (KPIs)	CTR (Tasa de Clics), CPM (Costo por Mil Impresiones), CPC (Costo por Clic), CPA (Costo por Adquisici贸n) y ROAS (Retorno de la Inversi贸n Publicitaria).
            4.2 Lectura de Informes	C贸mo configurar y analizar los informes del Administrador de Anuncios. An谩lisis por ubicaci贸n, dispositivo y hora.</p>
          </div>
        </div>`
      }
    ]
  },
  {
    titulo: "M贸dulo 4:Estrategias Avanzadas y Escalabilidad",
    temas: [
      {
        titulo: "Estrategias Avanzadas y Escalabilidad",
        contenido: `
        <div class="tema-contenido">
          <div class="video-container">
            <iframe src="https://www.youtube.com/embed/b2RgkxkseQQ?si=KBB3V1r1ciY6D5TC" title="redes5" allowfullscreen></iframe>
          </div>
          <div class="descripcion-container">
            <h3>驴Qu茅 aprender谩s?</h3>
            <p>Estrategias de Retargeting Avanzado	Campa帽as de "embudo completo" (Full Funnel): Retargeting por etapas (visitantes sin compra, a帽adidos al carrito, leads).
            5.2 Escalamiento de Campa帽as	T茅cnicas para aumentar el presupuesto sin "quemar" la audiencia: Escalado horizontal (nuevas audiencias) vs. vertical (aumento de presupuesto).</p>
          </div>
        </div>`
      }
    ]
  }
];




let moduloActual = 0;
let temaActual = 0;

const listaModulos = document.getElementById('lista-modulos');
const tituloLeccion = document.getElementById('titulo-leccion');
const contenidoLeccion = document.getElementById('contenido-leccion');
const btnSiguiente = document.getElementById('btn-siguiente');
const btnComenzar = document.getElementById('btn-comenzar');
const btnEvaluacion = document.getElementById('btn-evaluacion'); // bot贸n test

// === GUARDAR Y CARGAR PROGRESO LOCAL ===
function guardarProgreso() {
  const progreso = {
    moduloActual,
    temaActual,
    curso: curso.map(mod => ({
      habilitado: mod.habilitado,
      temas: mod.temas.map(t => ({
        hecho: t.hecho,
        habilitado: t.habilitado
      }))
    })),
    cursoCompletado: localStorage.getItem("cursoCompletado") === "true"
  };
  localStorage.setItem("progresoPublicidadRedes", JSON.stringify(progreso));
}

function cargarProgresoLocal() {
  const data = localStorage.getItem("progresoPublicidadRedes");
  if (!data) return false;
  const progreso = JSON.parse(data);

  progreso.curso.forEach((mod, i) => {
    curso[i].habilitado = mod.habilitado;
    mod.temas.forEach((t, j) => {
      curso[i].temas[j].hecho = t.hecho;
      curso[i].temas[j].habilitado = t.habilitado;
    });
  });

  moduloActual = progreso.moduloActual;
  temaActual = progreso.temaActual;

  return true;
}

// Inicializar estado
curso.forEach(m => {
  m.habilitado = false;
  m.temas.forEach(t => {
    t.hecho = false;
    t.habilitado = false;
  });
});

// Cargar m贸dulos en sidebar
function cargarModulos() {
  listaModulos.innerHTML = "";
  curso.forEach((modulo, i) => {
    const li = document.createElement('li');
    li.classList.add('list-group-item');
    if (!modulo.habilitado) li.classList.add('deshabilitado');

    const todosHechos = modulo.temas.every(t => t.hecho);
    const iconoCheck = todosHechos ? `<i class="bi bi-check2 modulo-completo"></i>` : "";

    li.innerHTML = `
      <a class="modulo-link" data-bs-toggle="collapse" href="#modulo${i}" role="button">
        ${modulo.titulo} ${iconoCheck} <i class="bi bi-chevron-down"></i>
      </a>
      <ul class="list-group collapse" id="modulo${i}"></ul>
    `;
    listaModulos.appendChild(li);

    const ulTemas = li.querySelector('ul');
    modulo.temas.forEach((tema, j) => {
      const temaLi = document.createElement('li');
      temaLi.classList.add('list-group-item', 'tema-item');
      temaLi.textContent = tema.titulo;

      if (tema.habilitado) {
        temaLi.style.cursor = 'pointer';
        temaLi.style.opacity = '1';
        temaLi.onclick = () => mostrarTema(i, j);
      } else {
        temaLi.style.cursor = 'not-allowed';
        temaLi.style.opacity = '0.5';
      }

      ulTemas.appendChild(temaLi);
    });
  });
}

// Mostrar tema
function mostrarTema(m, t) {
  if (!curso[m].habilitado || !curso[m].temas[t].habilitado) {
    alert("Debes completar los temas anteriores primero.");
    return;
  }

  moduloActual = m;
  temaActual = t;
  const tema = curso[m].temas[t];
  tituloLeccion.textContent = tema.titulo;
  contenidoLeccion.innerHTML = tema.contenido;

  let botonesHTML = `<button class="btn btn-success" id="btn-hecho">Marcar como hecho</button>`;
  if (m === 1 && t === 1) {
    botonesHTML += `<button class="btn btn-primary" id="btn-pdf" onclick="window.open('Material/EjerciciosPublicidadRedes.pdf', '_blank')">Ver PDF de pr谩ctica</button>`;
  }

  const contenedorBotones = document.createElement('div');
  contenedorBotones.id = 'botones-leccion';
  contenedorBotones.className = 'd-flex gap-2 mt-3 justify-content-end';
  contenedorBotones.innerHTML = botonesHTML;
  contenidoLeccion.appendChild(contenedorBotones);

  btnSiguiente.disabled = true;
  btnSiguiente.style.display = (m === curso.length - 1 && t === curso[m].temas.length - 1)
    ? 'none' : 'inline-block';

  document.getElementById('btn-hecho').onclick = () => marcarComoHecho(m, t);

  // Mostrar bot贸n evaluaci贸n solo si es el 煤ltimo tema del 煤ltimo m贸dulo y no completado
  if (m === curso.length - 1 && t === curso[m].temas.length - 1 && localStorage.getItem("cursoCompletado") !== "true") {
    btnEvaluacion.style.display = 'block';
  } else {
    btnEvaluacion.style.display = 'none';
  }

  guardarProgreso();
}

// Marcar tema como hecho
function marcarComoHecho(m, t) {
  curso[m].temas[t].hecho = true;
  btnSiguiente.disabled = false;

  if (t + 1 < curso[m].temas.length) {
    curso[m].temas[t + 1].habilitado = true;
  } else if (m + 1 < curso.length) {
    curso[m + 1].habilitado = true;
    curso[m + 1].temas[0].habilitado = true;
  }

  guardarProgreso();
  cargarModulos();
}

// Aprobar curso despu茅s del test
function aprobarCurso() {
  localStorage.setItem("cursoCompletado", "true");
  guardarProgreso();
  mostrarCursoCompletadoGlobal();
}

// Mostrar curso completado
function mostrarCursoCompletadoGlobal() {
  btnEvaluacion.style.display = 'none';

  // Marcar todos los m贸dulos y temas como completados
  curso.forEach(mod => {
    mod.habilitado = true;
    mod.temas.forEach(t => t.hecho = true);
  });

  // Actualizar sidebar con check
  cargarModulos();

  // Mostrar mensaje central
  contenidoLeccion.innerHTML = "";
  const mensaje = document.createElement('div');
  mensaje.className = 'alert alert-success mt-4 text-center fw-bold';
  mensaje.textContent = ' 隆Felicidades! Has completado el curso exitosamente.';
  contenidoLeccion.appendChild(mensaje);
}

// Bot贸n siguiente
function siguienteTema() {
  if (temaActual < curso[moduloActual].temas.length - 1) {
    mostrarTema(moduloActual, temaActual + 1);
  } else if (moduloActual < curso.length - 1) {
    mostrarTema(moduloActual + 1, 0);
  } else {
    btnSiguiente.disabled = true;
  }
  guardarProgreso();
}

// Bot贸n comenzar
btnComenzar.onclick = () => {
  document.getElementById('pantalla-inicial').style.display = 'none';
  document.getElementById('contenido-curso').style.display = 'block';
  curso[0].habilitado = true;
  curso[0].temas[0].habilitado = true;
  cargarModulos();
  mostrarTema(0, 0);
};

// === Al cargar la p谩gina ===
document.addEventListener("DOMContentLoaded", () => {
  // Cargar progreso guardado
  cargarProgresoLocal();

  // Si el curso ya fue completado, mostrar mensaje autom谩ticamente
  if (localStorage.getItem("cursoCompletado") === "true") {
    mostrarCursoCompletadoGlobal();
  } else {
    // Si hay progreso previo, cargar 煤ltimo m贸dulo y tema
    const tieneProgreso = cargarProgresoLocal();
    if (tieneProgreso) {
      document.getElementById('pantalla-inicial').style.display = 'none';
      document.getElementById('contenido-curso').style.display = 'block';
      cargarModulos();
      mostrarTema(moduloActual, temaActual);
    } else {
      // Si no hay progreso, cargar m贸dulos iniciales
      cargarModulos();
    }
  }
});
</script>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>